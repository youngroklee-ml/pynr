<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 값을 다룰 때 흥미로운 차이점 | Python &amp; R</title>
  <meta name="description" content="<p>이 책은 Python과 R의 비슷한 점과 차이점을 예제를 통해 알아보기 위한 책이다.
어느 하나가 다른 하나의 우위에 있음을 보이려는 의도가 아니며, Python 사용자가
R을 이해하거나 R 사용자가 Python을 이해하는 데 도움을 주기 위해 작성되었다.</p>" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 값을 다룰 때 흥미로운 차이점 | Python &amp; R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>이 책은 Python과 R의 비슷한 점과 차이점을 예제를 통해 알아보기 위한 책이다.
어느 하나가 다른 하나의 우위에 있음을 보이려는 의도가 아니며, Python 사용자가
R을 이해하거나 R 사용자가 Python을 이해하는 데 도움을 주기 위해 작성되었다.</p>" />
  <meta name="github-repo" content="youngroklee-ml/pynr" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 값을 다룰 때 흥미로운 차이점 | Python &amp; R" />
  
  <meta name="twitter:description" content="<p>이 책은 Python과 R의 비슷한 점과 차이점을 예제를 통해 알아보기 위한 책이다.
어느 하나가 다른 하나의 우위에 있음을 보이려는 의도가 아니며, Python 사용자가
R을 이해하거나 R 사용자가 Python을 이해하는 데 도움을 주기 위해 작성되었다.</p>" />
  

<meta name="author" content="이영록" />


<meta name="date" content="2022-06-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="scalar.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Python & R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#python"><i class="fa fa-check"></i><b>1.1</b> Python</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#r"><i class="fa fa-check"></i><b>1.2</b> R</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="dictionary-named-list-environment.html"><a href="dictionary-named-list-environment.html"><i class="fa fa-check"></i><b>2</b> 파이썬의 dictionary, 그리고 R의 named list와 environment</a>
<ul>
<li class="chapter" data-level="2.1" data-path="dictionary-named-list-environment.html"><a href="dictionary-named-list-environment.html#dictionary-in-python"><i class="fa fa-check"></i><b>2.1</b> Dictionary in Python</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="dictionary-named-list-environment.html"><a href="dictionary-named-list-environment.html#생성"><i class="fa fa-check"></i><b>2.1.1</b> 생성</a></li>
<li class="chapter" data-level="2.1.2" data-path="dictionary-named-list-environment.html"><a href="dictionary-named-list-environment.html#lookup"><i class="fa fa-check"></i><b>2.1.2</b> Lookup</a></li>
<li class="chapter" data-level="2.1.3" data-path="dictionary-named-list-environment.html"><a href="dictionary-named-list-environment.html#reference-semantics"><i class="fa fa-check"></i><b>2.1.3</b> Reference semantics</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="dictionary-named-list-environment.html"><a href="dictionary-named-list-environment.html#named-list-vs-environment-in-r"><i class="fa fa-check"></i><b>2.2</b> Named list vs environment in R</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="dictionary-named-list-environment.html"><a href="dictionary-named-list-environment.html#생성-1"><i class="fa fa-check"></i><b>2.2.1</b> 생성</a></li>
<li class="chapter" data-level="2.2.2" data-path="dictionary-named-list-environment.html"><a href="dictionary-named-list-environment.html#lookup-1"><i class="fa fa-check"></i><b>2.2.2</b> Lookup</a></li>
<li class="chapter" data-level="2.2.3" data-path="dictionary-named-list-environment.html"><a href="dictionary-named-list-environment.html#reference-semantics-1"><i class="fa fa-check"></i><b>2.2.3</b> Reference semantics</a></li>
<li class="chapter" data-level="2.2.4" data-path="dictionary-named-list-environment.html"><a href="dictionary-named-list-environment.html#uniqueness"><i class="fa fa-check"></i><b>2.2.4</b> Uniqueness</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tuple-list-list.html"><a href="tuple-list-list.html"><i class="fa fa-check"></i><b>3</b> 파이썬의 tuple과 list, 그리고 R의 list</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tuple-list-list.html"><a href="tuple-list-list.html#tuple-vs-list-in-python"><i class="fa fa-check"></i><b>3.1</b> Tuple vs list in Python</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="tuple-list-list.html"><a href="tuple-list-list.html#immutable-vs-mutable"><i class="fa fa-check"></i><b>3.1.1</b> Immutable vs mutable</a></li>
<li class="chapter" data-level="3.1.2" data-path="tuple-list-list.html"><a href="tuple-list-list.html#append-items"><i class="fa fa-check"></i><b>3.1.2</b> Append items</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="tuple-list-list.html"><a href="tuple-list-list.html#list-in-r"><i class="fa fa-check"></i><b>3.2</b> List in R</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="tuple-list-list.html"><a href="tuple-list-list.html#mutable-object"><i class="fa fa-check"></i><b>3.2.1</b> Mutable object</a></li>
<li class="chapter" data-level="3.2.2" data-path="tuple-list-list.html"><a href="tuple-list-list.html#append-items-1"><i class="fa fa-check"></i><b>3.2.2</b> Append items</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="array-vector.html"><a href="array-vector.html"><i class="fa fa-check"></i><b>4</b> 파이썬의 array, 그리고 R의 vector</a>
<ul>
<li class="chapter" data-level="4.1" data-path="array-vector.html"><a href="array-vector.html#파이썬의-array"><i class="fa fa-check"></i><b>4.1</b> 파이썬의 array</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="array-vector.html"><a href="array-vector.html#mutability"><i class="fa fa-check"></i><b>4.1.1</b> Mutability</a></li>
<li class="chapter" data-level="4.1.2" data-path="array-vector.html"><a href="array-vector.html#다른-타입의-원소-입력하기"><i class="fa fa-check"></i><b>4.1.2</b> 다른 타입의 원소 입력하기</a></li>
<li class="chapter" data-level="4.1.3" data-path="array-vector.html"><a href="array-vector.html#원소-추가하기"><i class="fa fa-check"></i><b>4.1.3</b> 원소 추가하기</a></li>
<li class="chapter" data-level="4.1.4" data-path="array-vector.html"><a href="array-vector.html#문자열-시퀀스"><i class="fa fa-check"></i><b>4.1.4</b> 문자열 시퀀스</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="array-vector.html"><a href="array-vector.html#r의-vector"><i class="fa fa-check"></i><b>4.2</b> R의 vector</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="array-vector.html"><a href="array-vector.html#mutability-1"><i class="fa fa-check"></i><b>4.2.1</b> Mutability</a></li>
<li class="chapter" data-level="4.2.2" data-path="array-vector.html"><a href="array-vector.html#다른-타입의-원소-입력하기-1"><i class="fa fa-check"></i><b>4.2.2</b> 다른 타입의 원소 입력하기</a></li>
<li class="chapter" data-level="4.2.3" data-path="array-vector.html"><a href="array-vector.html#원소-추가하기-1"><i class="fa fa-check"></i><b>4.2.3</b> 원소 추가하기</a></li>
<li class="chapter" data-level="4.2.4" data-path="array-vector.html"><a href="array-vector.html#문자열-시퀀스-1"><i class="fa fa-check"></i><b>4.2.4</b> 문자열 시퀀스</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="array-vector.html"><a href="array-vector.html#파이썬-numpy"><i class="fa fa-check"></i><b>4.3</b> 파이썬 NumPy</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="scalar.html"><a href="scalar.html"><i class="fa fa-check"></i><b>5</b> Scalar</a>
<ul>
<li class="chapter" data-level="5.1" data-path="scalar.html"><a href="scalar.html#파이썬"><i class="fa fa-check"></i><b>5.1</b> 파이썬</a></li>
<li class="chapter" data-level="5.2" data-path="scalar.html"><a href="scalar.html#r-1"><i class="fa fa-check"></i><b>5.2</b> R</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interesting-differences.html"><a href="interesting-differences.html"><i class="fa fa-check"></i><b>6</b> 값을 다룰 때 흥미로운 차이점</a>
<ul>
<li class="chapter" data-level="6.1" data-path="interesting-differences.html"><a href="interesting-differences.html#큰-정수"><i class="fa fa-check"></i><b>6.1</b> 큰 정수</a></li>
<li class="chapter" data-level="6.2" data-path="interesting-differences.html"><a href="interesting-differences.html#결측값"><i class="fa fa-check"></i><b>6.2</b> 결측값</a></li>
<li class="chapter" data-level="6.3" data-path="interesting-differences.html"><a href="interesting-differences.html#문자열"><i class="fa fa-check"></i><b>6.3</b> 문자열</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Python &amp; R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="interesting-differences" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> 값을 다룰 때 흥미로운 차이점<a href="interesting-differences.html#interesting-differences" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="큰-정수" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> 큰 정수<a href="interesting-differences.html#큰-정수" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>매우 큰 정수를 정확한 값으로 사용해야 하는 경우, 파이썬에서는 기본 정수형을 그대로 사용할 수 있겠으나, R에서는 일정 크기 이상의 정수가 정확히 저장되지 않는 문제가 있다. 따라서, 매우 큰 정수값을 사용해야 하는 경우 R에서는 주의하도록 하자.</p>
<p>20자리 정수를 객체에 지정한 뒤, 그 값을 프린트하는 다음 파이썬 코드를 보자. 값이 정확하게 출력된다. 파이썬(보다 정확하게 파이썬3)의 경우, 정수값의 범위에 제한이 없다.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb194-1"><a href="interesting-differences.html#cb194-1" aria-hidden="true" tabindex="-1"></a>py_int <span class="op">=</span> <span class="dv">12345678901234567890</span></span>
<span id="cb194-2"><a href="interesting-differences.html#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(py_int)</span></code></pre></div>
<pre><code>## &lt;class &#39;int&#39;&gt;</code></pre>
<div class="sourceCode" id="cb196"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb196-1"><a href="interesting-differences.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(py_int)</span></code></pre></div>
<pre><code>## 12345678901234567890</code></pre>
<p>같은 숫자(마지막에 정수형임을 나타내는 <code>L</code>을 추가)를 R 객체에 입력하려 할 때, 그 값이 정확하게 저장되지 않음을 확인할 수 있다. R은 너무 큰 정수는 실수형(double)으로 받아들이고, 실수형에 적용되는 표현식을 통해 주어진 값에 가깝지만 정확히 같지는 않은 값으로 나타난다. <code>typeof()</code>의 결과가 <code>"integer"</code>가 아닌 <code>"double"</code>임에 주목하자.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="interesting-differences.html#cb198-1" aria-hidden="true" tabindex="-1"></a>r_int <span class="ot">&lt;-</span> 12345678901234567890L</span>
<span id="cb198-2"><a href="interesting-differences.html#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(r_int)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="interesting-differences.html#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span>(r_int, <span class="at">digits =</span> <span class="dv">20</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] &quot;12345678901234567168&quot;</code></pre>
<p>이는 파이썬에서 값을 정수가 아닌 실수형(float)으로 입력하였을 때(마지막에 실수형임을 나타내는 <code>.</code> 추가) 나타나는 결과와 동일하다.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb202-1"><a href="interesting-differences.html#cb202-1" aria-hidden="true" tabindex="-1"></a>py_float <span class="op">=</span> <span class="fl">12345678901234567890.</span></span>
<span id="cb202-2"><a href="interesting-differences.html#cb202-2" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(py_float)</span></code></pre></div>
<pre><code>## &lt;class &#39;float&#39;&gt;</code></pre>
<div class="sourceCode" id="cb204"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb204-1"><a href="interesting-differences.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&#39;</span><span class="sc">{</span>py_float<span class="sc">:20.0f}</span><span class="ss">&#39;</span>)</span></code></pre></div>
<pre><code>## 12345678901234567168</code></pre>
</div>
<div id="결측값" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> 결측값<a href="interesting-differences.html#결측값" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>결측값에 대해서는 R을 먼저 살펴보자.</p>
<p>R에서는 <code>NA</code>가 결측값을 나타낸다. 일반적으로는 데이터의 형태와 상관없이 <code>NA</code>를 사용하지만, 이는 사실 논리형에 대한 결측값이며, 다른 형태, 즉 정수형(<code>NA_integer_</code>), 실수형(<code>NA_real_</code>), 문자형(<code>NA_character_</code>)의 결측값도 각각 존재한다.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="interesting-differences.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="interesting-differences.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="cn">NA_integer_</span>)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="interesting-differences.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="cn">NA_real_</span>)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="interesting-differences.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="cn">NA_character_</span>)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>데이터 형태와 상관없이 <code>NA</code>를 써도, vector에 있는 다른 관측값들의 형태와 일관된 결측값으로 자동으로 적용된다.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="interesting-differences.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="cn">NA</span>)</span></code></pre></div>
<pre><code>##  logi NA</code></pre>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="interesting-differences.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="cn">NA_integer_</span>)</span></code></pre></div>
<pre><code>##  int NA</code></pre>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="interesting-differences.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">c</span>(5L, <span class="cn">NA</span>)[<span class="dv">2</span>])</span></code></pre></div>
<pre><code>##  int NA</code></pre>
<p>파이썬에서는 기본적으로 <code>None</code>이 결측값을 표현하는데 사용된다.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb220-1"><a href="interesting-differences.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="va">None</span></span>
<span id="cb220-2"><a href="interesting-differences.html#cb220-2" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(<span class="va">None</span>)</span></code></pre></div>
<pre><code>## &lt;class &#39;NoneType&#39;&gt;</code></pre>
<p>이 결측값은 정수형, 실수형, 문자형 array.array에 원소로 추가할 수가 없다.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb222-1"><a href="interesting-differences.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> array <span class="im">import</span> array</span>
<span id="cb222-2"><a href="interesting-differences.html#cb222-2" aria-hidden="true" tabindex="-1"></a>array(<span class="st">&#39;l&#39;</span>, [<span class="dv">5</span>, <span class="va">None</span>])</span></code></pre></div>
<pre><code>## Error in py_call_impl(callable, dots$args, dots$keywords): TypeError: an integer is required (got type NoneType)</code></pre>
<div class="sourceCode" id="cb224"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb224-1"><a href="interesting-differences.html#cb224-1" aria-hidden="true" tabindex="-1"></a>array(<span class="st">&#39;f&#39;</span>, [<span class="fl">5.</span>, <span class="va">None</span>])</span></code></pre></div>
<pre><code>## Error in py_call_impl(callable, dots$args, dots$keywords): TypeError: must be real number, not NoneType</code></pre>
<div class="sourceCode" id="cb226"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb226-1"><a href="interesting-differences.html#cb226-1" aria-hidden="true" tabindex="-1"></a>array(<span class="st">&#39;u&#39;</span>, [<span class="st">&#39;5&#39;</span>, <span class="va">None</span>])</span></code></pre></div>
<pre><code>## Error in py_call_impl(callable, dots$args, dots$keywords): TypeError: array item must be unicode character</code></pre>
<p>대신, 결측값을 NumPy array에 입력해 보자. NumPy는 <code>np.nan</code>이라는 실수형 결측값을 지원하며, 이를 사용하는 것이 흔한 경우다. 이때 array 내에 존재하는 다른 관측값의 형태에 따라 type coercion에 의해 예상치 않은 결과를 얻을 수 있으니 조심하도록 하자.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb228-1"><a href="interesting-differences.html#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb228-2"><a href="interesting-differences.html#cb228-2" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(np.nan)</span></code></pre></div>
<pre><code>## &lt;class &#39;float&#39;&gt;</code></pre>
<p>실수형 array에 이 결측값을 추가하는 경우에는 여전히 실수형 array로 나타날 것이다.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb230-1"><a href="interesting-differences.html#cb230-1" aria-hidden="true" tabindex="-1"></a>np.array([<span class="fl">5.</span>, np.nan])</span></code></pre></div>
<pre><code>## array([ 5., nan])</code></pre>
<p>정수형 array에 결측값을 추가했을 때는 이 array 자체가 실수형으로 변하는데, 이는 데이터 형태에서 실수형인 결측값이 정수형인 관측값들보다 데이터 형태 결정 시 우선순위에 있기 때문으로 보인다.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb232-1"><a href="interesting-differences.html#cb232-1" aria-hidden="true" tabindex="-1"></a>np.array([<span class="dv">5</span>, np.nan])</span></code></pre></div>
<pre><code>## array([ 5., nan])</code></pre>
<div class="sourceCode" id="cb234"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb234-1"><a href="interesting-differences.html#cb234-1" aria-hidden="true" tabindex="-1"></a>np.array([<span class="dv">5</span>, np.nan])[<span class="dv">0</span>]</span></code></pre></div>
<pre><code>## 5.0</code></pre>
<p>문자형 array에 결측값을 추가했을 때는 결측값이 문자열 <code>'nan'</code>으로 변한다. Type coercion상 문자형이 실수형보다 우위에 있기 때문으로 보인다.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb236-1"><a href="interesting-differences.html#cb236-1" aria-hidden="true" tabindex="-1"></a>np.array([<span class="st">&#39;5&#39;</span>, np.nan])</span></code></pre></div>
<pre><code>## array([&#39;5&#39;, &#39;nan&#39;], dtype=&#39;&lt;U32&#39;)</code></pre>
<div class="sourceCode" id="cb238"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb238-1"><a href="interesting-differences.html#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(np.array([<span class="st">&#39;5&#39;</span>, np.nan])[<span class="dv">1</span>])</span></code></pre></div>
<pre><code>## &lt;class &#39;numpy.str_&#39;&gt;</code></pre>
</div>
<div id="문자열" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> 문자열<a href="interesting-differences.html#문자열" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>파이썬과 R이 문자열을 다루는 방식을 조금 들여다보자. 우선 파이썬으로 문자열 객체를 만들어 보자. 객체 형태가 <code>str</code>로 나타난다. 이는 문자의 시퀀스이며, immutable object이다.</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb240-1"><a href="interesting-differences.html#cb240-1" aria-hidden="true" tabindex="-1"></a>py_string <span class="op">=</span> <span class="st">&quot;Hello Python!&quot;</span></span>
<span id="cb240-2"><a href="interesting-differences.html#cb240-2" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(py_string)</span></code></pre></div>
<pre><code>## &lt;class &#39;str&#39;&gt;</code></pre>
<p>시퀀스이기 때문에, slicing 등이 지원된다.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb242-1"><a href="interesting-differences.html#cb242-1" aria-hidden="true" tabindex="-1"></a>py_string[<span class="dv">0</span>:<span class="dv">5</span>]</span></code></pre></div>
<pre><code>## &#39;Hello&#39;</code></pre>
<p>파이썬에서 이 특정 문자열을 위한 메모리 주소와 할당량을 보자.</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb244-1"><a href="interesting-differences.html#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="bu">id</span>(py_string)</span></code></pre></div>
<pre><code>## 4699474288</code></pre>
<div class="sourceCode" id="cb246"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb246-1"><a href="interesting-differences.html#cb246-1" aria-hidden="true" tabindex="-1"></a>sys.getsizeof(py_string)</span></code></pre></div>
<pre><code>## 62</code></pre>
<p>이제, 파이썬 리스트를 만들고, 각 원소에 동일한 문자열을 저장해 보자. 이 때, 같은 문자열 객체를 재사용하는 것이 아니라, 매번 새롭게 동일한 문자열 값을 저장해 보자.</p>
<p>만약 for문을 사용한다면, 파이썬은 모든 같은 문자열을 같은 메모리에 저장하고, list의 모든 원소가 같은 메모리 주소를 참조하도록 할 것이다. 파이썬에서 for문이 메모리를 좀 더 효율적으로 사용하기 위한 어떤 처리를 하는 것으로 보인다.</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb248-1"><a href="interesting-differences.html#cb248-1" aria-hidden="true" tabindex="-1"></a>py_list <span class="op">=</span> <span class="bu">list</span>([<span class="va">None</span>] <span class="op">*</span> <span class="dv">5</span>)</span>
<span id="cb248-2"><a href="interesting-differences.html#cb248-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>):</span>
<span id="cb248-3"><a href="interesting-differences.html#cb248-3" aria-hidden="true" tabindex="-1"></a>  py_list[i] <span class="op">=</span> <span class="st">&quot;Hello Python!&quot;</span></span>
<span id="cb248-4"><a href="interesting-differences.html#cb248-4" aria-hidden="true" tabindex="-1"></a>[<span class="bu">id</span>(x) <span class="cf">for</span> x <span class="kw">in</span> py_list]</span></code></pre></div>
<pre><code>## [4699487664, 4699487664, 4699487664, 4699487664, 4699487664]</code></pre>
<p>하지만, 만약 for문을 사용하지 않고 매번 새롭게 원소를 추가하는 경우라면, 파이썬은 같은 문자열을 다른 메모리 주소에 저장할 것이다.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb250-1"><a href="interesting-differences.html#cb250-1" aria-hidden="true" tabindex="-1"></a>py_list <span class="op">=</span> <span class="bu">list</span>([<span class="va">None</span>] <span class="op">*</span> <span class="dv">5</span>)</span>
<span id="cb250-2"><a href="interesting-differences.html#cb250-2" aria-hidden="true" tabindex="-1"></a>py_list[<span class="dv">0</span>] <span class="op">=</span> <span class="st">&quot;Hello Python!&quot;</span></span>
<span id="cb250-3"><a href="interesting-differences.html#cb250-3" aria-hidden="true" tabindex="-1"></a>py_list[<span class="dv">1</span>] <span class="op">=</span> <span class="st">&quot;Hello Python!&quot;</span></span>
<span id="cb250-4"><a href="interesting-differences.html#cb250-4" aria-hidden="true" tabindex="-1"></a>py_list[<span class="dv">2</span>] <span class="op">=</span> <span class="st">&quot;Hello Python!&quot;</span></span>
<span id="cb250-5"><a href="interesting-differences.html#cb250-5" aria-hidden="true" tabindex="-1"></a>py_list[<span class="dv">3</span>] <span class="op">=</span> <span class="st">&quot;Hello Python!&quot;</span></span>
<span id="cb250-6"><a href="interesting-differences.html#cb250-6" aria-hidden="true" tabindex="-1"></a>py_list[<span class="dv">4</span>] <span class="op">=</span> <span class="st">&quot;Hello Python!&quot;</span></span>
<span id="cb250-7"><a href="interesting-differences.html#cb250-7" aria-hidden="true" tabindex="-1"></a>[<span class="bu">id</span>(x) <span class="cf">for</span> x <span class="kw">in</span> py_list]</span></code></pre></div>
<pre><code>## [4699496496, 4699496688, 4699496752, 4699496944, 4699497136]</code></pre>
<p>이와 같이 같은 값의 immutable 문자열을 메모리의 여러 곳에 중복하여 저장하는 것은 경우에 따라 메모리의 사용이 다소 비효율적일 수 있음을 보인다.</p>
<p>다음으로 R의 경우를 살펴보자. R은 문자열을 “character”라는 형태의 데이터로 저장한다. 이는 R 내에서는 vector와 같은 시퀀스가 아니라 하나의 독립적인 값으로 다루어지기 때문에, <code>[]</code> operator를 사용하여 문자열의 일부를 slicing할 수 없고, 별도의 함수들을 사용하여 추출해야 한다.</p>
<p>예를 들어, 다음 코드의 결과는 아마 기대와 다를 것이다. 무슨 일이 일어나고 있는지 잠시 생각해 보면, <code>r_string</code>은 character 형태의 길이가 1인 vector이고, 따라서 <code>r_string[1]</code>은 입력한 문자열을 반환하고, <code>r_string[2:5]</code>는 해당 원소가 존재하지 않으므로 <code>NA</code>를 반환한다.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="interesting-differences.html#cb252-1" aria-hidden="true" tabindex="-1"></a>r_string <span class="ot">&lt;-</span> <span class="st">&quot;Hello R!&quot;</span></span>
<span id="cb252-2"><a href="interesting-differences.html#cb252-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(r_string)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="interesting-differences.html#cb254-1" aria-hidden="true" tabindex="-1"></a>r_string[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Hello R!&quot; NA         NA         NA         NA</code></pre>
<p>이 경우, <code>r_string</code>에 입력한 문자열의 첫 다섯 개의 문자를 가져오기 위해서는 문자열을 다루는 함수를 사용해야 할 것이다.</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="interesting-differences.html#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(r_string, <span class="dv">1</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hello&quot;</code></pre>
<p><code>r_string</code>에 할당된 메모리 주소 정보를 살펴보자.</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="interesting-differences.html#cb258-1" aria-hidden="true" tabindex="-1"></a>pryr<span class="sc">::</span><span class="fu">inspect</span>(r_string)</span></code></pre></div>
<pre><code>## &lt;STRSXP 0x7f8bc70f2748&gt;
##   &lt;CHARSXP 0x7f8bc3480948&gt;
##   attributes: 
##     &lt;CHARSXP 0x7f8bf097eb40&gt;</code></pre>
<p>여기에서 최상위 STRSXP는 vector를 나타내며, CHARSXP는 vector의 원소인 문자열을 나타낸다.</p>
<p>파이썬의 경우와 마찬가지로 시퀀스에 문자열을 입력해 보자. 모든 원소가 문자열이기 때문에 list 대신 vector를 사용해서 보도록 하자. 파이썬에서 다소 비효율적으로 보였던 메모리 관리와 비교하기 위해, R에서도 for문을 사용하지 않고 원소 하나 하나에 값을 따로 할당하도록 하자.</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="interesting-differences.html#cb260-1" aria-hidden="true" tabindex="-1"></a>r_vector <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;character&quot;</span>, 5L)</span>
<span id="cb260-2"><a href="interesting-differences.html#cb260-2" aria-hidden="true" tabindex="-1"></a>r_vector[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="st">&quot;Hello R!&quot;</span></span>
<span id="cb260-3"><a href="interesting-differences.html#cb260-3" aria-hidden="true" tabindex="-1"></a>r_vector[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="st">&quot;Hello R!&quot;</span></span>
<span id="cb260-4"><a href="interesting-differences.html#cb260-4" aria-hidden="true" tabindex="-1"></a>r_vector[[<span class="dv">3</span>]] <span class="ot">&lt;-</span> <span class="st">&quot;Hello R!&quot;</span></span>
<span id="cb260-5"><a href="interesting-differences.html#cb260-5" aria-hidden="true" tabindex="-1"></a>r_vector[[<span class="dv">4</span>]] <span class="ot">&lt;-</span> <span class="st">&quot;Hello R!&quot;</span></span>
<span id="cb260-6"><a href="interesting-differences.html#cb260-6" aria-hidden="true" tabindex="-1"></a>r_vector[[<span class="dv">5</span>]] <span class="ot">&lt;-</span> <span class="st">&quot;Hello R!&quot;</span></span></code></pre></div>
<p><code>pryr::inspect()</code>를 이용하여 이 vector 객체의 메모리 사용을 살펴보면, 다섯 개 문자열 원소 모두 동일한 메모리 주소를 참조하는 것을 볼 수 있다. 이에 더하여, 그 메모리 주소가 앞서 생성했던 <code>r_string</code>의 원소인 문자열의 메모리 주소와 동일함을 확인할 수 있다. R에서는 하나의 R 세션 내에서 각 고유한 문자열값이 메모리 한 곳에만 저장되며, 나중에 동일한 문자열값을 다시 생성하려 하면, 중복하여 다른 위치에 생성하는 대신, 기존에 저장된 메모리를 참조한다. 이 방식을 통해 R은 매우 긴 동일한 문자열이 여러 이름 혹은 시퀀스의 여러 위치에 중복되는 경우 메모리를 효율적으로 사용할 수 있을 것이다.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="interesting-differences.html#cb261-1" aria-hidden="true" tabindex="-1"></a>pryr<span class="sc">::</span><span class="fu">inspect</span>(r_vector)</span></code></pre></div>
<pre><code>## &lt;STRSXP 0x7f8bc34ec608&gt;
##   &lt;CHARSXP 0x7f8bc3480948&gt;
##   attributes: 
##     &lt;CHARSXP 0x7f8bf097eb40&gt;
##   [CHARSXP 0x7f8bc3480948]
##   [CHARSXP 0x7f8bc3480948]
##   [CHARSXP 0x7f8bc3480948]
##   [CHARSXP 0x7f8bc3480948]</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="scalar.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
